id,created_at,published_at,name,body,author_url,author_id,author_login,assets_url,url,target_commitish,tarball_url,html_url,zipball_url,tag_name,draft,prerelease
5749144,2017-03-15T07:59:32Z,2017-03-15T08:00:59Z,Gallery keyboard accessibility improvements,"* [#510 Improve keyboard accessibility of slideshow gallery](https://github.com/BBC-News/wraith/pull/510)
* [#492 Fix undefined `page` variable](https://github.com/BBC-News/wraith/pull/492)",https://api.github.com/users/wildlyinaccurate,794263,wildlyinaccurate,https://api.github.com/repos/BBC-News/wraith/releases/5749144/assets,https://api.github.com/repos/BBC-News/wraith/releases/5749144,master,https://api.github.com/repos/BBC-News/wraith/tarball/v4.1.1,https://github.com/BBC-News/wraith/releases/tag/v4.1.1,https://api.github.com/repos/BBC-News/wraith/zipball/v4.1.1,v4.1.1,False,False
5250481,2017-01-24T13:15:47Z,2017-01-24T13:17:54Z,Spider imports fix,"Imports file is now autogenerated if it doesn't exist.

See https://github.com/BBC-News/wraith/pull/504
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/5250481/assets,https://api.github.com/repos/BBC-News/wraith/releases/5250481,master,https://api.github.com/repos/BBC-News/wraith/tarball/v4.0.1,https://github.com/BBC-News/wraith/releases/tag/v4.0.1,https://api.github.com/repos/BBC-News/wraith/zipball/v4.0.1,v4.0.1,False,False
4759851,2016-11-25T15:05:31Z,2016-11-25T15:06:55Z,'Imports' feature and better spider support,"Introduces (via #487):
- [x] 'Imports' functionality (#486)
- [x] `wraith spider [config_name]` command (#488)
- [x] `wraith info` command (#484)

## Spidering and Imports

We have a lot of [open 'Spider mode' issues](https://github.com/BBC-News/wraith/issues?utf8=%E2%9C%93&q=%20is%3Aissue%20label%3A%22Spider%20mode%22%20). Many of these arise from the fact that the Wraith spidering logic is quite complex and difficult to test. e.g. Wraith has to maintain a lot of internal state, triggering spidering automatically when certain config properties are missing, but only triggering the spidering if it hasn't been done in the last x-config-option days, etc.

We can make Wraith much simpler under the hood by giving spidering its own dedicated `spider` command, which the user must choose to run manually, as regularly as they choose. A new 'Imports' feature allows users to import configs into one another.

Paths determined through the `spider` command are stored to a file as YAML, instead of in a .txt file, which reduces complexity further by storing paths in the same way as non-spider use of Wraith. It also removes the Nokogiri dependency, which will speed up Wraith setup times slightly.

The 'Imports' feature has lots of potential uses beyond just supporting spidering. For example, you may have a common Wraith config defining browser engine, screen sizes to capture, colour of diff image, etc - and then you can have multiple different Wraith configs for each of your sites, all of which import the base config and stop you from having to duplicate all of that information.

### Proposed spider workflow

Say we have a simplified config:

``` yml
imports: ""spider_configs.yml""

domains:
  test: http://www.test.example.com
  live: http://www.test.example.com
```
1. `wraith spider test.yml` => spiders the sites, and saves the paths to `spider_configs.yml`.
2. `wraith capture test.yml` => the `spider_configs.yml` paths are automatically imported into the `test.yml`, and Wraith continues as if the paths were specified manually.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/4759851/assets,https://api.github.com/repos/BBC-News/wraith/releases/4759851,master,https://api.github.com/repos/BBC-News/wraith/tarball/v4.0.0,https://github.com/BBC-News/wraith/releases/tag/v4.0.0,https://api.github.com/repos/BBC-News/wraith/zipball/v4.0.0,v4.0.0,False,False
3814151,2016-08-04T15:41:49Z,2016-08-04T15:43:23Z,Spider 'undefined variable' error fixed,"Thanks to @Domi202 in https://github.com/BBC-News/wraith/pull/447.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/3814151/assets,https://api.github.com/repos/BBC-News/wraith/releases/3814151,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.2.1,https://github.com/BBC-News/wraith/releases/tag/v3.2.1,https://api.github.com/repos/BBC-News/wraith/zipball/v3.2.1,v3.2.1,False,False
3234941,2016-05-16T16:35:29Z,2016-05-16T16:40:38Z,CasperJS dependency handled externally,"See https://github.com/BBC-News/wraith/issues/376
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/3234941/assets,https://api.github.com/repos/BBC-News/wraith/releases/3234941,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.2.0,https://github.com/BBC-News/wraith/releases/tag/v3.2.0,https://api.github.com/repos/BBC-News/wraith/zipball/v3.2.0,v3.2.0,False,False
3234513,2016-05-16T15:44:00Z,2016-05-16T15:44:48Z,Improve error handling (gallery generation) and verbose mode,,https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/3234513/assets,https://api.github.com/repos/BBC-News/wraith/releases/3234513,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.1.8,https://github.com/BBC-News/wraith/releases/tag/v3.1.8,https://api.github.com/repos/BBC-News/wraith/zipball/v3.1.8,v3.1.8,False,False
3233076,2016-05-16T12:43:24Z,2016-05-16T12:44:05Z,Improved validation/error-checking,"Check config file exists, throw error if not.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/3233076/assets,https://api.github.com/repos/BBC-News/wraith/releases/3233076,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.1.7,https://github.com/BBC-News/wraith/releases/tag/v3.1.7,https://api.github.com/repos/BBC-News/wraith/zipball/v3.1.7,v3.1.7,False,False
3223375,2016-04-25T17:32:50Z,2016-05-13T20:28:31Z,Check that directory property exists,,https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/3223375/assets,https://api.github.com/repos/BBC-News/wraith/releases/3223375,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.1.6,https://github.com/BBC-News/wraith/releases/tag/v3.1.6,https://api.github.com/repos/BBC-News/wraith/zipball/v3.1.6,v3.1.6,False,False
2714018,2016-02-29T22:09:30Z,2016-02-29T22:10:44Z,Fix bug in determining config filepath,"Thanks to @gserrg for spotting and fixing the error.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2714018/assets,https://api.github.com/repos/BBC-News/wraith/releases/2714018,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.1.2,https://github.com/BBC-News/wraith/releases/tag/v3.1.2,https://api.github.com/repos/BBC-News/wraith/zipball/v3.1.2,v3.1.2,False,False
2705753,2016-02-28T18:49:17Z,2016-02-28T18:53:47Z,"Windows bug fixes, more robust image cropping, better text output","Fixes #369 (Windows absolute file path calculation)
Fixes #374 (better text output than simply 'cropping images')
Removes pointless thumbnails folder from history dir (#373)
Crop task copes with differences in height and now width (#296)
history image filenames now end in 'base' (#368)
#390 added in better file locating too, so Wraith now detects both .yml and .yaml files automatically.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2705753/assets,https://api.github.com/repos/BBC-News/wraith/releases/2705753,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.1.1,https://github.com/BBC-News/wraith/releases/tag/v3.1.1,https://api.github.com/repos/BBC-News/wraith/zipball/v3.1.1,v3.1.1,False,False
2338012,2015-12-24T13:41:37Z,2015-12-24T13:43:02Z,"Bug fixes, async support, debug/verbose mode","- significant bug fixes for PhantomJS users
- bug fix for Windows users (no longer directly use `pwd` commands)
- bug fix for CasperJS users (can now use ID selectors - the hashtag symbol is escaped before being passed to CLI)
- validation, giving users helpful error messages if they try to misuse Wraith
- expanded test suite (`construct_command` tests, validation tests)
- better default example configs and before_capture hooks
- asynchronous support for the before_capture hook. This introduces a breaking change (see next section)
- verbose mode (just add `verbose: true` to your config. Easier debugging)
- all logging moved to a logger class
- 'debug' functionality (built into verbose mode). Starts off the output of all commands with system-specific information which should help with debugging, e.g.

```
#################################################
  Wraith version:     3.0.4
  Ruby version:       ruby 2.0.0p353 (2013-11-22 revision 43784) [x86_64-darwin13.1.0]
  ImageMagick:        Version: ImageMagick 6.9.1-3 Q16 x86_64 2015-05-25 http://www.imagemagick.org
  PhantomJS version:  1.9.8
  CasperJS version:   1.0.0
#################################################
```

## Breaking changes

The new `before_capture` hook was great, but didn't support asynchronous actions such as AJAXing in content, etc, as Wraith's internal snap file would simply run the before_capture module and then continue, assuming the code was executed instantly.

Now, an additional parameter (the `ready` callback function) is passed to the before_capture module, which explicitly requires the module to call the callback before Phantom/Casper will continue. This means the user can put in arbitrary wait times, or perform any other asynchronous action, only calling the callback when they're ready.

``` javascript
module.exports = function (casper, ready) {
    // make Wraith wait a bit longer before taking the screenshot
    casper.wait(2000, ready); // you MUST call the ready() callback for Wraith to continue
}
```
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2338012/assets,https://api.github.com/repos/BBC-News/wraith/releases/2338012,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.1.0,https://github.com/BBC-News/wraith/releases/tag/v3.1.0,https://api.github.com/repos/BBC-News/wraith/zipball/v3.1.0,v3.1.0,False,False
2227814,2015-12-03T15:33:32Z,2015-12-03T15:34:54Z,Fixed resize_or_reload for PhantomJS configs,"Fixes #345.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2227814/assets,https://api.github.com/repos/BBC-News/wraith/releases/2227814,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.0.4,https://github.com/BBC-News/wraith/releases/tag/v3.0.4,https://api.github.com/repos/BBC-News/wraith/zipball/v3.0.4,v3.0.4,False,False
2221412,2015-12-02T17:03:26Z,2015-12-02T17:04:38Z,Fixed command line argument processing,"Also added path-level `resize_or_reload` property.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2221412/assets,https://api.github.com/repos/BBC-News/wraith/releases/2221412,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.0.2,https://github.com/BBC-News/wraith/releases/tag/v3.0.2,https://api.github.com/repos/BBC-News/wraith/zipball/v3.0.2,v3.0.2,False,False
2218714,2015-12-02T09:16:11Z,2015-12-02T09:22:34Z,Fixed before_capture path resolution,"Makes the before_capture and snap_file config options absolute so that, in theory, there should be no issues with Wraith finding paths.

Fixes #338.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2218714/assets,https://api.github.com/repos/BBC-News/wraith/releases/2218714,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.0.1,https://github.com/BBC-News/wraith/releases/tag/v3.0.1,https://api.github.com/repos/BBC-News/wraith/zipball/v3.0.1,v3.0.1,False,False
2214156,2015-12-01T15:48:43Z,2015-12-01T15:49:45Z,Abstracted JS files away. Added efficient mode,"This PR consists of:
- #330 (Abstract CasperJS/PhantomJS files away)
- #333 (Prompt user to open gallery)
- #335 (Enable 'efficient' capture mode)
- also fixes the spider.yaml example config.

Changes to API:
- `snap_file` property is NO LONGER NEEDED - it is abstracted away inside the Wraith gem itself. You can still specify your own `snap_file` if you wish (it will take precedence), but the default should now be to remove the property altogether and allow Wraith to select its own internal snap file.
- new `resize_or_reload` property, with values either 'resize' or 'reload'. Up to version 2.8.1, Wraith uses 'reload' behaviour, i.e. it reloads the browser for every screen width screenshot. For the time being, that is still the default. But those who wish to run much faster Wraith tests can switch to the new 'resize' mode, which resizes the current browser instance to take screenshots, rather than firing up the browser again and again.
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2214156/assets,https://api.github.com/repos/BBC-News/wraith/releases/2214156,master,https://api.github.com/repos/BBC-News/wraith/tarball/v3.0.0,https://github.com/BBC-News/wraith/releases/tag/v3.0.0,https://api.github.com/repos/BBC-News/wraith/zipball/v3.0.0,v3.0.0,False,False
2121271,2015-11-13T11:39:56Z,2015-11-13T11:41:48Z,"Bug fix, minor UI improvement","- Add a link to gallery views (#316)
- Fix regression which broke ""old"" style `paths` config (#315)
",https://api.github.com/users/wildlyinaccurate,794263,wildlyinaccurate,https://api.github.com/repos/BBC-News/wraith/releases/2121271/assets,https://api.github.com/repos/BBC-News/wraith/releases/2121271,master,https://api.github.com/repos/BBC-News/wraith/tarball/v2.8.1,https://github.com/BBC-News/wraith/releases/tag/v2.8.1,https://api.github.com/repos/BBC-News/wraith/zipball/v2.8.1,v2.8.1,False,False
2078346,2015-11-05T16:20:15Z,2015-11-05T16:21:07Z,"Bug fixes and improvements, and multiple gallery templates","- Adds helpful debug information to failed tests (merged #297. Thanks @marciovicente)
- Offers a new `slideshow_template` gallery output, with improvements including linking to the path directly from the gallery page (merged #302. Thanks @ryandowd)
- Prevents users from running `wraith latest` unless a `history_dir` property is defined and the directory exists (fixes #285)
- Allows testing of subsets of a config, rather than the entire config (fixes #293)
- No longer reports as a success if any of the images fails to generate a diff (fixes #292)
- Shows shell output in real time (fixes #303)

## Config changes:

``` yaml
# this property and its sub-properties are all optional
gallery:
  template: 'slideshow_template' # or 'basic_template' (which is the default)
  thumb_width: 200 # default
  thumb_height: 200 # default
```
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2078346/assets,https://api.github.com/repos/BBC-News/wraith/releases/2078346,master,https://api.github.com/repos/BBC-News/wraith/tarball/v2.8.0,https://github.com/BBC-News/wraith/releases/tag/v2.8.0,https://api.github.com/repos/BBC-News/wraith/zipball/v2.8.0,v2.8.0,False,False
2003541,2015-10-22T16:25:12Z,2015-10-22T16:27:01Z,Structural refactor,"- `/spec` directory now self-contained, containing all test assets
- new `/templates` directory is self-contained, containing all configs and JS that a Wraith user might want
- refactored the example configs, with fewer examples but showing more of Wraith's options and different modes
- exposed beforeCapture hook and customHeight option to both Phantom and Casper and reduced duplication between JS/non-JS Phantom files.
- fixed broken gallery generation when image paths have `-` in them
- avoid error in CasperJS when selector is not specified in YAML file
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/2003541/assets,https://api.github.com/repos/BBC-News/wraith/releases/2003541,master,https://api.github.com/repos/BBC-News/wraith/tarball/v2.7.0,https://github.com/BBC-News/wraith/releases/tag/v2.7.0,https://api.github.com/repos/BBC-News/wraith/zipball/v2.7.0,v2.7.0,False,False
1697835,2015-08-20T08:40:25Z,2015-08-20T08:41:35Z,Added beforeCapture JavaScript hook,"Merged in #279
",https://api.github.com/users/ChrisBAshton,5111927,ChrisBAshton,https://api.github.com/repos/BBC-News/wraith/releases/1697835/assets,https://api.github.com/repos/BBC-News/wraith/releases/1697835,master,https://api.github.com/repos/BBC-News/wraith/tarball/v2.6.0,https://github.com/BBC-News/wraith/releases/tag/v2.6.0,https://api.github.com/repos/BBC-News/wraith/zipball/v2.6.0,v2.6.0,False,False
1416480,2015-06-15T10:36:43Z,2015-06-15T10:37:59Z,Gallery Updates and Misc bug fixes,"Merged in #266 and #267 
",https://api.github.com/users/DaveBlooman,1492067,DaveBlooman,https://api.github.com/repos/BBC-News/wraith/releases/1416480/assets,https://api.github.com/repos/BBC-News/wraith/releases/1416480,master,https://api.github.com/repos/BBC-News/wraith/tarball/v2.5.2,https://github.com/BBC-News/wraith/releases/tag/v2.5.2,https://api.github.com/repos/BBC-News/wraith/zipball/v2.5.2,v2.5.2,False,False
1408185,2015-06-12T10:05:57Z,2015-06-12T10:14:18Z,Bug fixes,"Minor big fixes #261 and #250 
",https://api.github.com/users/DaveBlooman,1492067,DaveBlooman,https://api.github.com/repos/BBC-News/wraith/releases/1408185/assets,https://api.github.com/repos/BBC-News/wraith/releases/1408185,master,https://api.github.com/repos/BBC-News/wraith/tarball/v2.4.2,https://github.com/BBC-News/wraith/releases/tag/v2.4.2,https://api.github.com/repos/BBC-News/wraith/zipball/v2.4.2,v2.4.2,False,False
1313595,2015-05-19T16:16:44Z,2015-05-19T16:18:19Z,,"Minor bug fixes
",https://api.github.com/users/DaveBlooman,1492067,DaveBlooman,https://api.github.com/repos/BBC-News/wraith/releases/1313595/assets,https://api.github.com/repos/BBC-News/wraith/releases/1313595,master,https://api.github.com/repos/BBC-News/wraith/tarball/v2.4.1,https://github.com/BBC-News/wraith/releases/tag/v2.4.1,https://api.github.com/repos/BBC-News/wraith/zipball/v2.4.1,v2.4.1,False,False
954069,2015-02-15T19:18:47Z,2015-02-15T19:21:32Z,2.3.2,"Latest release including history options, better gallery indicator, CI exit code options and updated documentation
",https://api.github.com/users/DaveBlooman,1492067,DaveBlooman,https://api.github.com/repos/BBC-News/wraith/releases/954069/assets,https://api.github.com/repos/BBC-News/wraith/releases/954069,master,https://api.github.com/repos/BBC-News/wraith/tarball/2.3.2,https://github.com/BBC-News/wraith/releases/tag/2.3.2,https://api.github.com/repos/BBC-News/wraith/zipball/2.3.2,2.3.2,False,False
320047,2014-05-14T14:43:00Z,2014-05-14T14:44:03Z,Parallel,"Release parallel version of Wraith for faster runs
",https://api.github.com/users/DaveBlooman,1492067,DaveBlooman,https://api.github.com/repos/BBC-News/wraith/releases/320047/assets,https://api.github.com/repos/BBC-News/wraith/releases/320047,master,https://api.github.com/repos/BBC-News/wraith/tarball/1.2.0,https://github.com/BBC-News/wraith/releases/tag/1.2.0,https://api.github.com/repos/BBC-News/wraith/zipball/1.2.0,1.2.0,False,False
178795,2014-02-09T13:17:54Z,2014-02-09T13:21:00Z,Gem release,"Wraith gem release with other code improvements.

Install by `gem install wraith`
",https://api.github.com/users/DaveBlooman,1492067,DaveBlooman,https://api.github.com/repos/BBC-News/wraith/releases/178795/assets,https://api.github.com/repos/BBC-News/wraith/releases/178795,master,https://api.github.com/repos/BBC-News/wraith/tarball/1.1.2,https://github.com/BBC-News/wraith/releases/tag/1.1.2,https://api.github.com/repos/BBC-News/wraith/zipball/1.1.2,1.1.2,False,False
