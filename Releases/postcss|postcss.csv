id,created_at,published_at,name,body,author_url,author_id,author_login,assets_url,url,target_commitish,tarball_url,html_url,zipball_url,tag_name,draft,prerelease
7994319,2017-10-04T14:00:34Z,2017-10-04T14:01:37Z,6.0.13,"* Fix TypeScript definitions for case of multiple PostCSS versions in `node_modules` (by @chriseppstein).
* Use `source-map` 0.6.",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/7994319/assets,https://api.github.com/repos/postcss/postcss/releases/7994319,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.13,https://github.com/postcss/postcss/releases/tag/6.0.13,https://api.github.com/repos/postcss/postcss/zipball/6.0.13,6.0.13,False,False
7873371,2017-09-25T07:17:52Z,2017-09-25T07:19:15Z,6.0.12,* Don’t copy `*` hack to declaration indent.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/7873371/assets,https://api.github.com/repos/postcss/postcss/releases/7873371,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.12,https://github.com/postcss/postcss/releases/tag/6.0.12,https://api.github.com/repos/postcss/postcss/zipball/6.0.12,6.0.12,False,False
7647884,2017-09-06T05:54:13Z,2017-09-06T05:56:00Z,6.0.11,* Add upper case `!IMPORTANT` support.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/7647884/assets,https://api.github.com/repos/postcss/postcss/releases/7647884,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.11,https://github.com/postcss/postcss/releases/tag/6.0.11,https://api.github.com/repos/postcss/postcss/zipball/6.0.11,6.0.11,False,False
7647882,2017-08-27T09:56:45Z,2017-09-06T05:55:43Z,6.0.10,* Reduce PostCSS size in webpack bundle.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/7647882/assets,https://api.github.com/repos/postcss/postcss/releases/7647882,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.10,https://github.com/postcss/postcss/releases/tag/6.0.10,https://api.github.com/repos/postcss/postcss/zipball/6.0.10,6.0.10,False,False
7366846,2017-08-11T20:52:31Z,2017-08-11T20:53:19Z,6.0.9,* Improve error message for plugin with old PostCSS (by @igoradamenko).,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/7366846/assets,https://api.github.com/repos/postcss/postcss/releases/7366846,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.9,https://github.com/postcss/postcss/releases/tag/6.0.9,https://api.github.com/repos/postcss/postcss/zipball/6.0.9,6.0.9,False,False
7096459,2017-07-19T15:53:04Z,2017-07-19T15:55:24Z,6.0.8,* Fix Node.js 4.2.2 support.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/7096459/assets,https://api.github.com/repos/postcss/postcss/releases/7096459,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.8,https://github.com/postcss/postcss/releases/tag/6.0.8,https://api.github.com/repos/postcss/postcss/zipball/6.0.8,6.0.8,False,False
7066075,2017-07-17T15:10:14Z,2017-07-17T15:47:27Z,6.0.7,Fix base64 decoding for old Node.js and browser.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/7066075/assets,https://api.github.com/repos/postcss/postcss/releases/7066075,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.7,https://github.com/postcss/postcss/releases/tag/6.0.7,https://api.github.com/repos/postcss/postcss/zipball/6.0.7,6.0.7,False,False
6940291,2017-07-05T16:26:58Z,2017-07-05T16:32:32Z,6.0.6,* Fix `end` position in at-rule without semicolon (by @hzlmn).,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6940291/assets,https://api.github.com/repos/postcss/postcss/releases/6940291,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.6,https://github.com/postcss/postcss/releases/tag/6.0.6,https://api.github.com/repos/postcss/postcss/zipball/6.0.6,6.0.6,False,False
6911194,2017-07-03T11:12:03Z,2017-07-03T11:14:21Z,6.0.5,* Move Babel config from `package.json` for `node_modules` compiling cases.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6911194/assets,https://api.github.com/repos/postcss/postcss/releases/6911194,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.5,https://github.com/postcss/postcss/releases/tag/6.0.5,https://api.github.com/repos/postcss/postcss/zipball/6.0.5,6.0.5,False,False
6891641,2017-06-30T11:34:30Z,2017-06-30T11:35:58Z,6.0.4,"* Fix parsing `;;` after rules.
* Use [Chalk 2.0](https://github.com/chalk/chalk/releases/tag/v2.0.0).",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6891641/assets,https://api.github.com/repos/postcss/postcss/releases/6891641,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.4,https://github.com/postcss/postcss/releases/tag/6.0.4,https://api.github.com/repos/postcss/postcss/zipball/6.0.4,6.0.4,False,False
6819604,2017-06-23T19:11:54Z,2017-06-23T19:02:38Z,6.0.3,"* Fix escape sequences parsing (by @hzlmn).
* Added ability to force disable colors with an environment variable.
* Improved color detection of some terminal apps.",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6819604/assets,https://api.github.com/repos/postcss/postcss/releases/6819604,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.3,https://github.com/postcss/postcss/releases/tag/6.0.3,https://api.github.com/repos/postcss/postcss/zipball/6.0.3,6.0.3,False,False
6685841,2017-06-12T18:42:45Z,2017-06-12T18:48:44Z,6.0.2,* Keep `raws.before` on moving `Root` children to new `Root`.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6685841/assets,https://api.github.com/repos/postcss/postcss/releases/6685841,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.2,https://github.com/postcss/postcss/releases/tag/6.0.2,https://api.github.com/repos/postcss/postcss/zipball/6.0.2,6.0.2,False,False
6303459,2017-05-07T11:32:11Z,2017-05-07T11:42:43Z,6.0.1,* Fix parser extensibility to use it in [Safe Parser](https://github.com/postcss/postcss-safe-parser).,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6303459/assets,https://api.github.com/repos/postcss/postcss/releases/6303459,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.1,https://github.com/postcss/postcss/releases/tag/6.0.1,https://api.github.com/repos/postcss/postcss/zipball/6.0.1,6.0.1,False,False
6300120,2017-05-06T11:25:12Z,2017-05-06T11:40:52Z,6.0 “Marquis Orias”,"<img src=""https://cloud.githubusercontent.com/assets/19343/25771868/5c010f02-325d-11e7-9ab6-7e962eb3b601.png"" align=""right"" width=""200"" height=""200"" alt=""Marquis Orias seal"">

PostCSS 6.0 drops support for Node.js 0.12, cleans the `raws` API, adds support for `@apply`, and uses less memory.

### Breaking Changes

Node.js [stopped](https://github.com/nodejs/LTS) 0.12 support in January 01. So PostCSS dropped Node.js 0.12 from all tests. Please update your Node.js version to 4.0 or 7.0.

In 6.0 we fixed our mistakes in API design. First, if node already had a parent, insert methods (`append`, `insertAfter`, etc) will not clone it anymore. In 6.0 inserts methods will remove inserted node from previous parent:

```js
parent1.nodes.length //=> 3
parent2.append(parent1.nodes[0])
parent1.nodes.length //=> 2
```

Now, `moveTo`, `moveAfter` & `moveBefore` are deprecated because regular insert methods have this move behavior. 

Also `Node#clone` now returns the exact copy of a node. In 6.0 it no longer cleans `raws`.

```js
node.raws.before //=> ""\n  ""
const clone = node.clone()
clone.raws.before //=> ""\n  ""
```

Every PostCSS plugin has `plugin.process` shortcut. In 6.0 we split process and plugin options in this shortcut:

```js
const plugin = postcss.plugin('postcss-awesome', colors => {
  …
})
plugin.process(css, { from: 'app.css' }, colors).css
```

In the new major release, we finally remove all deprecated methods from PostCSS 4.0. It should not be a big problem because we show deprecated warnings for them for 2 years. Most of the plugins updated their API.

### New Methods and Properties

Since we removed deprecated methods from PostCSS 4.0, in 6.0 we were free to add `before()` and `after()` shortcuts, similar to DOM API methods.

```js
node1.before(node2)
// is equal too
node1.parent.insertBefore(node1, node2)
```

Chrome 51 started to support “native CSS mixins” from @tabatkins [spec](https://tabatkins.github.io/specs/css-apply-rule/) under the flag:

```css
:root {
  --clearfix: {
    display: table;
    clear: both;
    content: '';
  };
}

.box:after{
  @apply --clearfix;
}
```

PostCSS 5.0 could parse it pretty well, but in some cases, it lost the semicolon after a mixin definition. In PostCSS 6.0 parser we covered this case, and node rules have `Rule#raws.ownSemicolon` for their own semicolon.

### Stream Parser

In PostCSS 5.0 tokenizing and parsing were separated steps. As a result, we wrote all tokens into memory between steps. It worked well most of the time, but had a large memory usage when parsing really big CSS files (more than 25 MB).

In 6.0 @hzlmn rewrote parser, and now parser and tokenizer work together (stream parser). As a result, we put only a few of the latest tokens in memory. So 6.0 will use less memory.

### Package Size

We care about `node_modules` size problem. So in 6.0 @lahmatiy and @h0tc0d3 removed `js-base64` dependency to use native Node.js and Browsers ways to base64 encoding.

Also, PostCSS was moved to `babel-preset-env`. Instead of regular `babel`, it will compile only necessary parts of ES6. So build in npm packages will be cleaner. Current [browserslist](https://github.com/ai/browserslist) config for `babel-preset-env` is `last 1 version` and `node 4`.

### Other Changes

* Fix error message on single `:` in CSS.
* Move tests to Jest.
* Clean up test (by @gkal19).",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6300120/assets,https://api.github.com/repos/postcss/postcss/releases/6300120,master,https://api.github.com/repos/postcss/postcss/tarball/6.0.0,https://github.com/postcss/postcss/releases/tag/6.0.0,https://api.github.com/repos/postcss/postcss/zipball/6.0.0,6.0.0,False,False
6078633,2017-04-13T22:45:08Z,2017-04-13T22:45:44Z,5.2.17,* Add `postcss-sass` suggestion to syntax error on `.sass` input.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/6078633/assets,https://api.github.com/repos/postcss/postcss/releases/6078633,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.17,https://github.com/postcss/postcss/releases/tag/5.2.17,https://api.github.com/repos/postcss/postcss/zipball/5.2.17,5.2.17,False,False
5665455,2017-03-07T15:40:09Z,2017-03-07T15:42:05Z,5.2.16,* Better error on wrong argument in node constructor.,https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5665455/assets,https://api.github.com/repos/postcss/postcss/releases/5665455,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.16,https://github.com/postcss/postcss/releases/tag/5.2.16,https://api.github.com/repos/postcss/postcss/zipball/5.2.16,5.2.16,False,False
5533788,2017-02-22T11:47:36Z,2017-02-22T11:52:13Z,5.2.15,"- Fix TypeScript definitions (by @bumbleblym).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5533788/assets,https://api.github.com/repos/postcss/postcss/releases/5533788,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.15,https://github.com/postcss/postcss/releases/tag/5.2.15,https://api.github.com/repos/postcss/postcss/zipball/5.2.15,5.2.15,False,False
5487537,2017-02-17T08:44:57Z,2017-02-17T08:45:43Z,5.2.14,"- Fix browser bundle building in webpack (by @janschoenherr).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5487537/assets,https://api.github.com/repos/postcss/postcss/releases/5487537,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.14,https://github.com/postcss/postcss/releases/tag/5.2.14,https://api.github.com/repos/postcss/postcss/zipball/5.2.14,5.2.14,False,False
5450862,2017-02-14T11:07:31Z,2017-02-14T11:13:15Z,5.2.13,"- Do not add comment to important raws.
- Fix JSDoc (by @Semigradsky)
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5450862/assets,https://api.github.com/repos/postcss/postcss/releases/5450862,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.13,https://github.com/postcss/postcss/releases/tag/5.2.13,https://api.github.com/repos/postcss/postcss/zipball/5.2.13,5.2.13,False,False
5365329,2017-02-05T21:18:56Z,2017-02-05T21:32:52Z,5.2.12,"- Fix typo in deprecation message (by @garetmckinley).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5365329/assets,https://api.github.com/repos/postcss/postcss/releases/5365329,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.12,https://github.com/postcss/postcss/releases/tag/5.2.12,https://api.github.com/repos/postcss/postcss/zipball/5.2.12,5.2.12,False,False
5215538,2017-01-20T08:34:45Z,2017-01-20T08:48:42Z,5.2.11,"- Fix TypeScript definitions (by @jedmao)
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5215538/assets,https://api.github.com/repos/postcss/postcss/releases/5215538,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.11,https://github.com/postcss/postcss/releases/tag/5.2.11,https://api.github.com/repos/postcss/postcss/zipball/5.2.11,5.2.11,False,False
5137430,2017-01-12T07:32:56Z,2017-01-12T07:35:37Z,5.2.10,"- Fix TypeScript definitions (by @jedmao)
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5137430/assets,https://api.github.com/repos/postcss/postcss/releases/5137430,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.10,https://github.com/postcss/postcss/releases/tag/5.2.10,https://api.github.com/repos/postcss/postcss/zipball/5.2.10,5.2.10,False,False
5102035,2017-01-09T07:03:52Z,2017-01-09T07:04:34Z,5.2.9,"- Update TypeScript definitions (by @jedmao).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5102035/assets,https://api.github.com/repos/postcss/postcss/releases/5102035,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.9,https://github.com/postcss/postcss/releases/tag/5.2.9,https://api.github.com/repos/postcss/postcss/zipball/5.2.9,5.2.9,False,False
5012663,2016-12-26T08:00:41Z,2016-12-26T08:01:23Z,5.2.8,"- Fix error message (by @ben-eb).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5012663/assets,https://api.github.com/repos/postcss/postcss/releases/5012663,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.8,https://github.com/postcss/postcss/releases/tag/5.2.8,https://api.github.com/repos/postcss/postcss/zipball/5.2.8,5.2.8,False,False
5004534,2016-12-24T08:32:48Z,2016-12-24T08:55:06Z,5.2.7,"- Better error message on syntax object in plugins list.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/5004534/assets,https://api.github.com/repos/postcss/postcss/releases/5004534,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.7,https://github.com/postcss/postcss/releases/tag/5.2.7,https://api.github.com/repos/postcss/postcss/zipball/5.2.7,5.2.7,False,False
4729114,2016-11-22T12:41:54Z,2016-11-22T12:46:38Z,5.2.6,"- Fix `postcss.vendor` for values with spaces (by @gucong3000).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/4729114/assets,https://api.github.com/repos/postcss/postcss/releases/4729114,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.6,https://github.com/postcss/postcss/releases/tag/5.2.6,https://api.github.com/repos/postcss/postcss/zipball/5.2.6,5.2.6,False,False
4440029,2016-10-20T12:14:46Z,2016-10-20T12:06:46Z,5.2.5,"- Better error message on unclosed string (by @ben-eb).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/4440029/assets,https://api.github.com/repos/postcss/postcss/releases/4440029,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.5,https://github.com/postcss/postcss/releases/tag/5.2.5,https://api.github.com/repos/postcss/postcss/zipball/5.2.5,5.2.5,False,False
4270338,2016-09-30T05:09:45Z,2016-09-30T05:17:24Z,5.2.4,"- Improve terminal CSS syntax highlight (by @lydell).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/4270338/assets,https://api.github.com/repos/postcss/postcss/releases/4270338,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.4,https://github.com/postcss/postcss/releases/tag/5.2.4,https://api.github.com/repos/postcss/postcss/zipball/5.2.4,5.2.4,False,False
4261755,2016-09-29T09:34:55Z,2016-09-29T09:59:35Z,5.2.3,"- Better color highlight in syntax error code frame.
- Fix color highlight support in old systems.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/4261755/assets,https://api.github.com/repos/postcss/postcss/releases/4261755,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.3,https://github.com/postcss/postcss/releases/tag/5.2.3,https://api.github.com/repos/postcss/postcss/zipball/5.2.3,5.2.3,False,False
4261754,2016-09-26T12:17:22Z,2016-09-29T09:59:17Z,5.2.2,"- Update `Processor#version`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/4261754/assets,https://api.github.com/repos/postcss/postcss/releases/4261754,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.2,https://github.com/postcss/postcss/releases/tag/5.2.2,https://api.github.com/repos/postcss/postcss/zipball/5.2.2,5.2.2,False,False
4261751,2016-09-26T12:03:57Z,2016-09-29T09:58:56Z,5.2.1,"- Fix source map path for CSS without from option (by @mlocati).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/4261751/assets,https://api.github.com/repos/postcss/postcss/releases/4261751,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.1,https://github.com/postcss/postcss/releases/tag/5.2.1,https://api.github.com/repos/postcss/postcss/zipball/5.2.1,5.2.1,False,False
4066966,2016-09-07T04:20:20Z,2016-09-07T04:47:50Z,5.2 “Duke Vapula”,"<img src=""https://cloud.githubusercontent.com/assets/19343/18299903/feb559ce-7507-11e6-86af-b66ddfd55f21.jpg"" align=""right"" width=""200"" height=""200"" alt=""Duke Vapula seal"">

PostCSS 5.2 contains parser fix and better syntax error output.

### Syntax Errors

In previous versions syntax errors were very simple:

<img src=""https://cloud.githubusercontent.com/assets/19343/18300129/c6faf4f6-7509-11e6-9223-2e4a4160b379.png"" alt=""PostCSS 5.1 syntax error"" width=""450"" height=""136"">

@andreypopp did great work and now main webpack’s loaders have same output on syntax error. Unification is good, so we decided to use same output for PostCSS errors too.

First, we added line numbers to code frame. Then we increased lines count. @andreypopp added syntax highlight. And finally @lydell fix output for tab indent and some other edge cases.

So right now PostCSS syntax errors are similar to Babel and webpack errors:

<img src=""https://cloud.githubusercontent.com/assets/19343/18300142/ef6ac9fc-7509-11e6-965e-d37d92bfe2b5.png"" alt=""PostCSS 5.2 syntax error"" width=""450"" height=""174"">

### Highlight CSS

PostCSS 5.2 has CSS syntax highlight for syntax error. But you can use our highlighter in your terminal tool too:

``` js
const highlight = require('postcss/lib/terminal-highlight');
console.log(highlight('a { color: black }'))
```

### Parser Fixes

PostCSS 5.2 has new `[` and `]` tokens to parse `[attr=;] { }` correctly.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/4066966/assets,https://api.github.com/repos/postcss/postcss/releases/4066966,master,https://api.github.com/repos/postcss/postcss/tarball/5.2.0,https://github.com/postcss/postcss/releases/tag/5.2.0,https://api.github.com/repos/postcss/postcss/zipball/5.2.0,5.2.0,False,False
3828838,2016-08-06T17:51:16Z,2016-08-06T18:06:24Z,5.1.2,"- Suggests SCSS/Less parsers on parse errors depends on file extension.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/3828838/assets,https://api.github.com/repos/postcss/postcss/releases/3828838,master,https://api.github.com/repos/postcss/postcss/tarball/5.1.2,https://github.com/postcss/postcss/releases/tag/5.1.2,https://api.github.com/repos/postcss/postcss/zipball/5.1.2,5.1.2,False,False
3828837,2016-07-26T08:53:50Z,2016-08-06T18:06:05Z,5.1.1,"- Fix TypeScript definitions (by @lexich).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/3828837/assets,https://api.github.com/repos/postcss/postcss/releases/3828837,master,https://api.github.com/repos/postcss/postcss/tarball/5.1.1,https://github.com/postcss/postcss/releases/tag/5.1.1,https://api.github.com/repos/postcss/postcss/zipball/5.1.1,5.1.1,False,False
3640275,2016-07-12T16:28:09Z,2016-07-12T16:31:33Z,5.1 “King and President Zagan”,"<img src=""https://cloud.githubusercontent.com/assets/19343/16774629/94ad9de4-4865-11e6-994e-4b22facbbb3c.jpg"" align=""right"" width=""200"" height=""200"" alt=""King and President Zagan seal"">

PostCSS 5.1 brings few improvements for source maps and JSDoc.

### Source Map

@markfinger improved source map support for new cases. He added absolute URI support in `from`/`to` options and added new `map.from` options for better control.

Some plugin developers forget to set correct `Node#source` for nodes. @TrySound add some help for developers. Now PostCSS will set `<no source>` source for sourceless nodes.

@montmanu add function value support for `map.prev` option.

### JSDoc

We moved all API docs close to source and now PostCSS has JSDoc comments for every public method and property.

I hope it will make plugin development easy: API docs become better and some IDE will show docs in autocomplete.

You can check latest API on [api.postcss.org](http://api.postcss.org/).

### Other
- Move tests from Mocha/Chai to [AVA](https://github.com/avajs/ava).
- Add declaration value type check in shortcut creating (by @gucong3000).
- `Result#warn` now returns new created warning.
- Don’t call plugin creator in `postcss.plugin` call.
- Add source maps to PostCSS ES5 build.
- Clean npm package from unnecessary docs.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/3640275/assets,https://api.github.com/repos/postcss/postcss/releases/3640275,master,https://api.github.com/repos/postcss/postcss/tarball/5.1.0,https://github.com/postcss/postcss/releases/tag/5.1.0,https://api.github.com/repos/postcss/postcss/zipball/5.1.0,5.1.0,False,False
3141352,2016-05-02T15:58:24Z,2016-05-02T16:22:12Z,5.0.21,"- Fix support with input source map with `utf8` encoding name.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/3141352/assets,https://api.github.com/repos/postcss/postcss/releases/3141352,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.21,https://github.com/postcss/postcss/releases/tag/5.0.21,https://api.github.com/repos/postcss/postcss/zipball/5.0.21,5.0.21,False,False
3136581,2016-05-01T06:03:48Z,2016-05-01T18:27:07Z,5.0.20,"- Fix between raw value parsing (by @davidtheclark)
- Update TypeScript definitions (by @jedmao)
- Clean fake node.source after `append(string)`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/3136581/assets,https://api.github.com/repos/postcss/postcss/releases/3136581,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.20,https://github.com/postcss/postcss/releases/tag/5.0.20,https://api.github.com/repos/postcss/postcss/zipball/5.0.20,5.0.20,False,False
2729808,2016-03-02T18:09:48Z,2016-03-02T18:45:15Z,5.0.19,"- Fix indent-based syntaxes support.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2729808/assets,https://api.github.com/repos/postcss/postcss/releases/2729808,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.19,https://github.com/postcss/postcss/releases/tag/5.0.19,https://api.github.com/repos/postcss/postcss/zipball/5.0.19,5.0.19,False,False
2708034,2016-02-29T08:29:55Z,2016-02-29T08:39:39Z,5.0.18,"- Parse new lines according W3C CSS syntax specification.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2708034/assets,https://api.github.com/repos/postcss/postcss/releases/2708034,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.18,https://github.com/postcss/postcss/releases/tag/5.0.18,https://api.github.com/repos/postcss/postcss/zipball/5.0.18,5.0.18,False,False
2697489,2016-02-26T16:00:22Z,2016-02-26T16:21:24Z,5.0.17,"- Fix options argument in `Node#warn` (by @ben-eb).
- Fix TypeScript definitions (by @jedmao).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2697489/assets,https://api.github.com/repos/postcss/postcss/releases/2697489,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.17,https://github.com/postcss/postcss/releases/tag/5.0.17,https://api.github.com/repos/postcss/postcss/zipball/5.0.17,5.0.17,False,False
2697481,2016-02-14T08:40:50Z,2016-02-26T16:20:34Z,5.0.16,"- Fix CSS syntax error position on unclosed quotes.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2697481/assets,https://api.github.com/repos/postcss/postcss/releases/2697481,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.16,https://github.com/postcss/postcss/releases/tag/5.0.16,https://api.github.com/repos/postcss/postcss/zipball/5.0.16,5.0.16,False,False
2697478,2016-02-11T14:15:42Z,2016-02-26T16:20:18Z,5.0.15,"- Fix `Node#clone()` on `null` value somewhere in node.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2697478/assets,https://api.github.com/repos/postcss/postcss/releases/2697478,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.15,https://github.com/postcss/postcss/releases/tag/5.0.15,https://api.github.com/repos/postcss/postcss/zipball/5.0.15,5.0.15,False,False
2697477,2016-01-03T21:41:42Z,2016-02-26T16:20:02Z,5.0.14,"- Allow to use PostCSS in webpack bundle without JSON loader.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2697477/assets,https://api.github.com/repos/postcss/postcss/releases/2697477,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.14,https://github.com/postcss/postcss/releases/tag/5.0.14,https://api.github.com/repos/postcss/postcss/zipball/5.0.14,5.0.14,False,False
2297769,2015-12-16T13:54:11Z,2015-12-16T14:06:03Z,5.0.13,"- Fix `index` and `word` options in `Warning#toString` (by @TrySound).
- Fix input source content loading in errors.
- Fix map options on using `LazyResult` as input CSS.
- 100% test coverage.
- Use Babel 6.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2297769/assets,https://api.github.com/repos/postcss/postcss/releases/2297769,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.13,https://github.com/postcss/postcss/releases/tag/5.0.13,https://api.github.com/repos/postcss/postcss/zipball/5.0.13,5.0.13,False,False
2122395,2015-11-13T15:20:51Z,2015-11-13T15:23:11Z,5.0.12,"- Allow passing a previous map with no mappings (by @papandreou).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2122395/assets,https://api.github.com/repos/postcss/postcss/releases/2122395,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.12,https://github.com/postcss/postcss/releases/tag/5.0.12,https://api.github.com/repos/postcss/postcss/zipball/5.0.12,5.0.12,False,False
2088854,2015-11-07T13:56:13Z,2015-11-07T13:58:57Z,5.0.11,"- Increase plugins performance by 1.5 times.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/2088854/assets,https://api.github.com/repos/postcss/postcss/releases/2088854,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.11,https://github.com/postcss/postcss/releases/tag/5.0.11,https://api.github.com/repos/postcss/postcss/zipball/5.0.11,5.0.11,False,False
1962902,2015-10-14T23:36:36Z,2015-10-14T23:37:08Z,5.0.10,"- Fix warning from nodes without source.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1962902/assets,https://api.github.com/repos/postcss/postcss/releases/1962902,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.10,https://github.com/postcss/postcss/releases/tag/5.0.10,https://api.github.com/repos/postcss/postcss/zipball/5.0.10,5.0.10,False,False
1932286,2015-10-08T18:30:12Z,2015-10-08T18:40:34Z,5.0.9,"- Fix source map type detection (by @asan).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1932286/assets,https://api.github.com/repos/postcss/postcss/releases/1932286,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.9,https://github.com/postcss/postcss/releases/tag/5.0.9,https://api.github.com/repos/postcss/postcss/zipball/5.0.9,5.0.9,False,False
1868764,2015-09-25T10:33:25Z,2015-09-25T16:22:59Z,,"- PostCSS now requires that node 0.12 is installed via the `engines` property in package.json (by @leftstick).
",https://api.github.com/users/ben-eb,1282980,ben-eb,https://api.github.com/repos/postcss/postcss/releases/1868764/assets,https://api.github.com/repos/postcss/postcss/releases/1868764,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.7,https://github.com/postcss/postcss/releases/tag/5.0.7,https://api.github.com/repos/postcss/postcss/zipball/5.0.7,5.0.7,False,False
1867119,2015-09-25T11:15:37Z,2015-09-25T11:20:53Z,,"- Fixed a missed step in `5.0.7` that caused the module to be published as ES6 code.
",https://api.github.com/users/ben-eb,1282980,ben-eb,https://api.github.com/repos/postcss/postcss/releases/1867119/assets,https://api.github.com/repos/postcss/postcss/releases/1867119,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.8,https://github.com/postcss/postcss/releases/tag/5.0.8,https://api.github.com/repos/postcss/postcss/zipball/5.0.8,5.0.8,False,False
1844672,2015-09-21T16:38:07Z,2015-09-21T16:41:27Z,5.0.6,"- Fix parsing nested at-rule without semicolon (by @mahtd).
- Trim `Declaration#value` (by @TrySound).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1844672/assets,https://api.github.com/repos/postcss/postcss/releases/1844672,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.6,https://github.com/postcss/postcss/releases/tag/5.0.6,https://api.github.com/repos/postcss/postcss/zipball/5.0.6,5.0.6,False,False
1803916,2015-09-12T10:30:58Z,2015-09-12T10:38:47Z,5.0.5,"- Fix multi-tokens property parsing (by @mahtd).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1803916/assets,https://api.github.com/repos/postcss/postcss/releases/1803916,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.5,https://github.com/postcss/postcss/releases/tag/5.0.5,https://api.github.com/repos/postcss/postcss/zipball/5.0.5,5.0.5,False,False
1752484,2015-09-01T18:21:26Z,2015-09-01T18:24:10Z,5.0.4,"- Fix start position in `Root#source`.
- Fix source map annotation, when CSS uses `\r\n` (by @MohammadYounes).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1752484/assets,https://api.github.com/repos/postcss/postcss/releases/1752484,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.4,https://github.com/postcss/postcss/releases/tag/5.0.4,https://api.github.com/repos/postcss/postcss/zipball/5.0.4,5.0.4,False,False
1739141,2015-08-28T22:00:52Z,2015-08-28T22:08:40Z,5.0.3,"- Fix `url()` parsing.
- Fix using `selectors` in `Rule` constructor.
- Add start source to `Root` node.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1739141/assets,https://api.github.com/repos/postcss/postcss/releases/1739141,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.3,https://github.com/postcss/postcss/releases/tag/5.0.3,https://api.github.com/repos/postcss/postcss/zipball/5.0.3,5.0.3,False,False
1710164,2015-08-22T14:11:07Z,2015-08-23T10:52:02Z,5.0.2,"- Fix `remove(index)` to be compatible with 4.x plugin.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1710164/assets,https://api.github.com/repos/postcss/postcss/releases/1710164,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.2,https://github.com/postcss/postcss/releases/tag/5.0.2,https://api.github.com/repos/postcss/postcss/zipball/5.0.2,5.0.2,False,False
1703790,2015-08-20T20:55:24Z,2015-08-21T09:12:58Z,5.0.1,"- Fix PostCSS 4.x plugins compatibility.
- Fix type definition loading (by @jedmao).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1703790/assets,https://api.github.com/repos/postcss/postcss/releases/1703790,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.1,https://github.com/postcss/postcss/releases/tag/5.0.1,https://api.github.com/repos/postcss/postcss/zipball/5.0.1,5.0.1,False,False
1696335,2015-08-19T18:56:36Z,2015-08-19T23:06:59Z,5.0 “President Valac”,"<img src=""https://cloud.githubusercontent.com/assets/19343/9369745/ef051dba-46d3-11e5-90dc-9154d656b182.png"" align=""right"" width=""200"" height=""199"" alt=""President Valac seal"">

PostCSS 5.0 brings custom syntax and fixes plugin API.

It is a biggest release in project history. But do not worry, we have only few very rare breaking changes.

### Breaking Changes
- `safe` option was removed and [Safe Parse](https://github.com/postcss/postcss-safe-parser) was moved to separated project.<br>Use `parser: require('postcss-safe-parser')` instead.
- Node.js 0.10 is not officially supported anymore. However, PostCSS should still work, if you install and load the [es6-promise polyfill](https://github.com/jakearchibald/es6-promise).
- `Node#toString` does not include `before` space symbols for root nodes.
- Very rare returning new `Root` plugin API was removed. 

### Custom Syntaxes

Now PostCSS can transform styles in any syntax, not only in CSS. It is important for cases:
- We have many tools like [CSSfmt](https://github.com/morishitter/cssfmt) or [Stylelint](http://stylelint.io/), which works directly with sources. So now, they will be able to work with SCSS by [postcss-scss](https://github.com/postcss/postcss-scss).
- Now we can use shorter syntax for PostCS-only solutions. For example, `// one line comments` with [SCSS parser](https://github.com/postcss/postcss-scss) or [SugarSS](https://github.com/postcss/postcss/issues/495) with Stylus/Sass like syntax.
- CSS-in-JS solutions like [React Style Autoprefix](https://github.com/UXtemple/autoprefix) or [Styling](https://github.com/andreypopp/styling) now can directly convert JS object to PostCSS AST without stringifing and reparsing.

PostCSS 5.0 has 3 new options:
- `parser` to change input parser. For example, to use [Safe Parser](https://github.com/postcss/postcss-safe-parser) in online demo tool.
- `stringifier` to change output content generator.
- `syntax` to change both parser and stringifier.

Because some syntax can return non-CSS value, `Result` now has `content` alias.

``` js
import scss from 'postcss-scss';

postcss().process(source, { syntax: scss }).then( (result) => {
    result.content // SCSS-to-SCSS transforms
});

postcss().process(source, { parser: scss }).then( (result) => {
    result.css // Compile SCSS one-line comments
});
```

We wrote good docs about [developing new syntax for PostCSS](https://github.com/postcss/postcss/blob/master/docs/syntax.md). If you will have any questions, ask in [our Gitter chat](https://gitter.im/postcss/postcss).

### API Changes

In 5.0 we change nodes API to make it clear and more familiar to DOM or jQuery API.
Do not worry, old methods are still work, just show a deprecated message.

If your plugin is built with PostCSS 5.0, it will have `plugin.process(css)` shortcut to work as separated tool:

``` js
import nested from `postcss-nested`;
nested.process(css).then( result => console.log(result.css) );
```

@jedmao renamed `eachInside`, `eachDecl`, `eachRule`, `eachAtRule` and `eachComment` to `walk`, `walkDecls`, `walkRules`, `walkAtRules` and `walkComments`. So recursive behaviour is more clear.

@ben-eb with @jonathantneal made API more common with DOM API:
- Method `remove` deletes node itself and `removeChild` removes child from container.
- Method `Node#replace` was removed in favor of `replaceWith`.
- Insert methods now support multiple arguments with nodes.

All whitespace symbols properties now called “raw” and located in `Node#raws` object, so custom parser can add own custom raw properties. `Node#style` and `cleanStyles` methods were renamed to `raw` and `cleanRaws`:

``` js
if ( decl.raw('before').match(/\n/) ) {
    decl.raws.before = '';
}
```

### Messages

PostCSS ecosystem now has one of the best CSS linters — [Stylelint](http://stylelint.io/). So we make warning/error API much better.

First, In 5.0 we have smarter color support detection by @sindresorhus [supports-color](https://github.com/chalk/supports-color).

Second, we add `word` and `index` options to errors and warnings methods to highlight special word in bad node.

Third, we now have `Node#warn` shortcut to add warnings:

``` js
export default postcss.plugin('postcss-important-hater', () => {
    return (css, result) => {
        css.walkDecls( (decl) => {
            if ( decl.important ) {
                decl.warn(result, '!important is bad', { word: '!important' });
            }
        });
    };
});

// title.sass:2:15 !important is bad
// .title
//   color: black !important
//                ^
```

### TypeScript and Windows

@jedmao made PostCSS really enterprise ready solution :).

First, he fix all tests on Windows and added [AppVeyor CI](https://ci.appveyor.com/project/ai/postcss) to test every commit on Windows.

Second, he made really big job and added type definitions for TypeScript. For example, Visual Studio will show nice autocompletion with documentation:

![PostCSS in Visual Studio](https://cloud.githubusercontent.com/assets/19343/9371024/d623bcca-46dd-11e5-9327-f06aadc75b37.jpg)

Do not worry, PostCSS itself is still ES7 project.

### Other Changes
- Deprecate `CssSyntaxError#generated` in favor of `input`.
- Deprecate `Root#prevMap` in favor of `Root.source.input.map`.
- Add stringifier option to `Node#toString`.
- `Rule#selectors` setter detects separators.
- Add `postcss.stringify` method.
- Throw descriptive errors for incorrectly formatted plugins.
- Add docs to npm release.
- Fix `url()` parsing.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1696335/assets,https://api.github.com/repos/postcss/postcss/releases/1696335,master,https://api.github.com/repos/postcss/postcss/tarball/5.0.0,https://github.com/postcss/postcss/releases/tag/5.0.0,https://api.github.com/repos/postcss/postcss/zipball/5.0.0,5.0.0,False,False
1506745,2015-07-07T18:53:37Z,2015-07-07T18:54:08Z,4.1.16,"- Fix errors without stack trace.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1506745/assets,https://api.github.com/repos/postcss/postcss/releases/1506745,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.16,https://github.com/postcss/postcss/releases/tag/4.1.16,https://api.github.com/repos/postcss/postcss/zipball/4.1.16,4.1.16,False,False
1505776,2015-07-07T15:23:48Z,2015-07-07T15:29:34Z,4.1.15,"- Allow asynchronous plugins to change processor plugins list (by @ben-eb)
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1505776/assets,https://api.github.com/repos/postcss/postcss/releases/1505776,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.15,https://github.com/postcss/postcss/releases/tag/4.1.15,https://api.github.com/repos/postcss/postcss/zipball/4.1.15,4.1.15,False,False
1495342,2015-07-04T10:57:46Z,2015-07-04T10:58:11Z,4.1.14,"- Fix for plugins packs defined by `postcss.plugin`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1495342/assets,https://api.github.com/repos/postcss/postcss/releases/1495342,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.14,https://github.com/postcss/postcss/releases/tag/4.1.14,https://api.github.com/repos/postcss/postcss/zipball/4.1.14,4.1.14,False,False
1453485,2015-06-23T22:55:51Z,2015-06-24T02:20:43Z,4.1.13,"- Fix input inlined source maps with UTF-8 encoding.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1453485/assets,https://api.github.com/repos/postcss/postcss/releases/1453485,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.13,https://github.com/postcss/postcss/releases/tag/4.1.13,https://api.github.com/repos/postcss/postcss/zipball/4.1.13,4.1.13,False,False
1443628,2015-06-22T02:01:12Z,2015-06-22T02:01:48Z,4.1.12,"- Update Promise polyfill.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1443628/assets,https://api.github.com/repos/postcss/postcss/releases/1443628,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.12,https://github.com/postcss/postcss/releases/tag/4.1.12,https://api.github.com/repos/postcss/postcss/zipball/4.1.12,4.1.12,False,False
1303968,2015-05-16T17:13:19Z,2015-05-16T17:15:59Z,4.1.11,"- Fix error message on wrong plugin format.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1303968/assets,https://api.github.com/repos/postcss/postcss/releases/1303968,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.11,https://github.com/postcss/postcss/releases/tag/4.1.11,https://api.github.com/repos/postcss/postcss/zipball/4.1.11,4.1.11,False,False
1303965,2015-05-11T17:58:51Z,2015-05-16T17:15:45Z,4.1.10,"- Fix Promise behavior on sync plugin errors.
- Automatically fill `plugin` field in `CssSyntaxError`.
- Fix warning message (by @ben-eb).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1303965/assets,https://api.github.com/repos/postcss/postcss/releases/1303965,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.10,https://github.com/postcss/postcss/releases/tag/4.1.10,https://api.github.com/repos/postcss/postcss/zipball/4.1.10,4.1.10,False,False
1258186,2015-05-05T10:31:41Z,2015-05-05T10:32:02Z,4.1.9,"- Speed up `node.clone()`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1258186/assets,https://api.github.com/repos/postcss/postcss/releases/1258186,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.9,https://github.com/postcss/postcss/releases/tag/4.1.9,https://api.github.com/repos/postcss/postcss/zipball/4.1.9,4.1.9,False,False
1242086,2015-05-01T00:16:18Z,2015-05-01T00:17:23Z,4.1.8,"- Accepts `Processor` instance in `postcss()` constructor too. 
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1242086/assets,https://api.github.com/repos/postcss/postcss/releases/1242086,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.8,https://github.com/postcss/postcss/releases/tag/4.1.8,https://api.github.com/repos/postcss/postcss/zipball/4.1.8,4.1.8,False,False
1229793,2015-04-28T22:34:54Z,2015-04-28T22:35:47Z,4.1.7,"- Speed up `postcss.list` (by @TrySound).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1229793/assets,https://api.github.com/repos/postcss/postcss/releases/1229793,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.7,https://github.com/postcss/postcss/releases/tag/4.1.7,https://api.github.com/repos/postcss/postcss/zipball/4.1.7,4.1.7,False,False
1218558,2015-04-26T17:45:04Z,2015-04-26T17:45:41Z,4.1.6,"- Fix Promise behavior on parsing error.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1218558/assets,https://api.github.com/repos/postcss/postcss/releases/1218558,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.6,https://github.com/postcss/postcss/releases/tag/4.1.6,https://api.github.com/repos/postcss/postcss/zipball/4.1.6,4.1.6,False,False
1161234,2015-04-13T21:45:36Z,2015-04-13T21:50:00Z,4.1.5,"- Parse at-words in declaration values.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1161234/assets,https://api.github.com/repos/postcss/postcss/releases/1161234,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.5,https://github.com/postcss/postcss/releases/tag/4.1.5,https://api.github.com/repos/postcss/postcss/zipball/4.1.5,4.1.5,False,False
1128013,2015-04-05T23:51:18Z,2015-04-06T00:01:01Z,4.1.4,"- Fix Promise polyfill dependency (by @antyakushev and @silvenon)
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1128013/assets,https://api.github.com/repos/postcss/postcss/releases/1128013,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.4,https://github.com/postcss/postcss/releases/tag/4.1.4,https://api.github.com/repos/postcss/postcss/zipball/4.1.4,4.1.4,False,False
1127651,2015-04-05T18:53:10Z,2015-04-05T18:56:58Z,4.1.3,"- Add Promise polyfill for node.js 0.10 and IE.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1127651/assets,https://api.github.com/repos/postcss/postcss/releases/1127651,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.3,https://github.com/postcss/postcss/releases/tag/4.1.3,https://api.github.com/repos/postcss/postcss/zipball/4.1.3,4.1.3,False,False
1119104,2015-04-02T10:56:01Z,2015-04-02T10:56:29Z,4.1.2,"- List helpers can be accessed independently `var space = postcss.list.space`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1119104/assets,https://api.github.com/repos/postcss/postcss/releases/1119104,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.2,https://github.com/postcss/postcss/releases/tag/4.1.2,https://api.github.com/repos/postcss/postcss/zipball/4.1.2,4.1.2,False,False
1118450,2015-04-02T07:15:11Z,2015-04-02T07:17:02Z,4.1.1,"- Show deprecated message only once.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1118450/assets,https://api.github.com/repos/postcss/postcss/releases/1118450,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.1,https://github.com/postcss/postcss/releases/tag/4.1.1,https://api.github.com/repos/postcss/postcss/zipball/4.1.1,4.1.1,False,False
1115910,2015-04-01T15:31:53Z,2015-04-01T16:09:19Z,4.1 “Marquis Andras”,"<img src=""https://cloud.githubusercontent.com/assets/19343/6944712/d7303764-d89d-11e4-888f-cf3923767d4c.png"" align=""right"" width=""200"" height=""200"" alt=""Marquis Andras seal"">

PostCSS 4.1 brings async plugins support and messages API.

### Asynchronous Plugins

PostCSS 4.1 allows plugins to operate asynchronously, by returning a [Promise](http://www.html5rocks.com/en/tutorials/es6/promises/).

``` js
module.exports = postcss.plugin('postcss-read', function (opt) {
    return function (css) {
        return new Promise(function (resolve, reject) {
            fs.readFile(opt.file, function (err, content) {
                if ( err ) {
                    reject(err);
                } else {
                    css.append(content);
                    resolve();
                }
            });
        });
    };
});
```

Note, that PostCSS still runs plugins one-by-one to avoid conflicts.

### Messages API

`Result` instance now has `messages` array for plugin communications.

Main usage of this messages API is a warnings with `Result#warn()` and `Result#warnings()` shortcuts:

``` js
var plugin = postcss.plugin('postcss-important-linter', function () {
    return function (css, result) {
        css.eachDecl(function (decl) {
            if ( decl.important ) {
                result.warn('Try to avoid !important', { node: decl });
            }
        });
    }
});

postcss([plugin]).process(css).then(function (result) {
    result.warnings().forEach(function (msg) {
        console.warn(msg.toString());
    });
});
```

With [postcss-messages](https://github.com/postcss/postcss-messages) you can see all plugins warnings.

### Plugin API

4.1 release contains `postcss.plugin()` function:

``` js
var postcss = require('postcss');

module.exports = postcss.plugin('postcss-plugin-name', function (opts) {
    return function (css) {
        // Process css
    };
});
```

It creates a plugin with a standard API:

``` js
plugin.postcssPlugin                   //=> ""postcss-plugin-name""
plugin.postcssVersion                  //=> ""4.1.0""

postcss([ plugin ])                    // with default options
postcss([ plugin({ prop: 'color' }) ]) // with options
```

Also `node.error()` now accepts `plugin` option:

``` js
if ( !variables[name] ) {
    throw decl.error('Unknown variable ' + name, { plugin: 'postcss-vars' });
}
```

### Guidelines

As PostCSS grows, it is time to take care of its ecosystem.

As first step we made the [Guidelines for PostCSS runners](https://github.com/postcss/postcss/blob/master/Runner%20Guidelines.md), like [gulp-postcss](https://github.com/w0rm/gulp-postcss) or [postcss-cli](https://github.com/code42day/postcss-cli).

The guidelines for plugin developers will be published next month. Stay tuned with [@PostCSS](https://twitter.com/postcss).

### Other Changes
- Insert nodes by CSS string.
- Show version warning message on error from an outdated plugin.
- Send `Result` instance to plugins as the second argument.
- Add `CssSyntaxError#showSourceCode()`.
- Add `postcss.list` and `postcss.vendor` aliases.
- Parse wrong closing bracket.
- Add `Processor#version`.
- Parse `!important` statement with spaces and comments inside (by @ben-eb).
- Throw an error on declaration without `prop` or `value` (by @philip-peterson).
- Fix source map mappings position.
- Add indexed source map support.
- Always set `error.generated`.
- Clean all source map annotation comments.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/1115910/assets,https://api.github.com/repos/postcss/postcss/releases/1115910,master,https://api.github.com/repos/postcss/postcss/tarball/4.1.0,https://github.com/postcss/postcss/releases/tag/4.1.0,https://api.github.com/repos/postcss/postcss/zipball/4.1.0,4.1.0,False,False
982187,2015-02-24T12:42:00Z,2015-02-24T12:43:09Z,4.0.6,"- Remove `babel` from released package dependencies (by @zertosh).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/982187/assets,https://api.github.com/repos/postcss/postcss/releases/982187,master,https://api.github.com/repos/postcss/postcss/tarball/4.0.6,https://github.com/postcss/postcss/releases/tag/4.0.6,https://api.github.com/repos/postcss/postcss/zipball/4.0.6,4.0.6,False,False
978229,2015-02-23T13:28:59Z,2015-02-23T13:29:21Z,4.0.5,"- Fix error message on double colon in declaration.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/978229/assets,https://api.github.com/repos/postcss/postcss/releases/978229,master,https://api.github.com/repos/postcss/postcss/tarball/4.0.5,https://github.com/postcss/postcss/releases/tag/4.0.5,https://api.github.com/repos/postcss/postcss/zipball/4.0.5,4.0.5,False,False
952044,2015-02-14T10:43:45Z,2015-02-14T10:45:00Z,4.0.4,"- Fix indent detection in some rare cases.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/952044/assets,https://api.github.com/repos/postcss/postcss/releases/952044,master,https://api.github.com/repos/postcss/postcss/tarball/4.0.4,https://github.com/postcss/postcss/releases/tag/4.0.4,https://api.github.com/repos/postcss/postcss/zipball/4.0.4,4.0.4,False,False
892765,2015-01-28T12:40:35Z,2015-01-28T12:42:07Z,4.0.3,"- Faster API with 6to5 Loose mode.
- Fix indexed source maps support.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/892765/assets,https://api.github.com/repos/postcss/postcss/releases/892765,master,https://api.github.com/repos/postcss/postcss/tarball/4.0.3,https://github.com/postcss/postcss/releases/tag/4.0.3,https://api.github.com/repos/postcss/postcss/zipball/4.0.3,4.0.3,False,False
881327,2015-01-24T17:13:55Z,2015-01-24T17:14:47Z,4.0.2,"- Do not copy IE hacks to code style.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/881327/assets,https://api.github.com/repos/postcss/postcss/releases/881327,master,https://api.github.com/repos/postcss/postcss/tarball/4.0.2,https://github.com/postcss/postcss/releases/tag/4.0.2,https://api.github.com/repos/postcss/postcss/zipball/4.0.2,4.0.2,False,False
842020,2015-01-11T18:43:17Z,2015-01-11T18:43:51Z,4.0.1,"- Add `source.input` to `Root` too.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/842020/assets,https://api.github.com/repos/postcss/postcss/releases/842020,master,https://api.github.com/repos/postcss/postcss/tarball/4.0.1,https://github.com/postcss/postcss/releases/tag/4.0.1,https://api.github.com/repos/postcss/postcss/zipball/4.0.1,4.0.1,False,False
815497,2014-12-30T12:37:49Z,2014-12-30T14:52:32Z,4.0 “Duke Flauros”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5578797/fab1b094-902e-11e4-9956-481dea05dabf.png"" align=""right"" width=""200"" height=""200"" alt=""Duke Flauros seal"">

PostCSS 4.0 brings new APIs for plugin developers.

### New Methods
- `cloneBefore()` and `cloneAfter()` shortcuts to clone node and insert clone before or after current one.
- `moveTo(rule)`, `moveBefore(node)` and `moveAfter(node)` to remove node from current parent and append to other parent or insert before/after other node.
- `replaceWith(other)` to replace node with other node.
- `rule.removeAll()` to remove all children from rule.
- `next()`, `prev()` and `root()` to travel between nodes.
- `replaceValues(regexp, callback)` to replace some string in all declarations values.

### Iteration with Filter

Methods `eachDecl()` and `eachAtRule()` now have optional first argument with string or regexp to filter declarations by property or at-rules by name:

``` js
css.eachDecl(/background(|-image)/, function (decl) {
    inlineImage(decl);
});
css.eachAtRule('keyframes', function (atrule) {
    atrule.removeSelf();
});
```

### Custom Syntax Errors

If CSS use wrong syntax of your plugin (for example, wrong variable name for variables plugin) now you can throw a custom syntax error with source map support:

``` js
if ( wrongName ) {
    throw node.error('Wrong variable name');
}
//=> CssSyntaxError: popup.css:45:5: Bad variable syntax
//   var-name: 1
//   ^
```

Also error object is a best way to create warning:

``` js
if ( notSupported ) {
    var error = node.error('This property is not supported in IE');
    console.warn( error.toString() );
}
```

PostCSS syntax error output now contains class name to be like other node.js errors.

### Indentations

PostCSS 4.0 has a lot of fixes in CSS whitespaces support. For example, it will change indentation, when you move rule to other node. So plugins like [postcss-nested](https://github.com/postcss/postcss-nested) now will return readable output.

### API Changes
- `Container#childs` was renamed to `nodes`.
- `PostCSS#processors` was renamed to `plugins`.
- `Node#source.file` was moved to `source.input.file`.

### Other Changes
- You can use object shortcut to create and append rule and at-rule: `root.append({ selector: 'a' })` and `root.append({ name: 'encoding', params: '""utf-8""' })`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/815497/assets,https://api.github.com/repos/postcss/postcss/releases/815497,master,https://api.github.com/repos/postcss/postcss/tarball/4.0.0,https://github.com/postcss/postcss/releases/tag/4.0.0,https://api.github.com/repos/postcss/postcss/zipball/4.0.0,4.0.0,False,False
767020,2014-12-09T09:14:31Z,2014-12-09T09:20:11Z,3.0.7,"- Fix IE filter parsing with multiple commands.
- Safer way to consume PostCSS object as plugin (by @MoOx).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/767020/assets,https://api.github.com/repos/postcss/postcss/releases/767020,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.7,https://github.com/postcss/postcss/releases/tag/3.0.7,https://api.github.com/repos/postcss/postcss/zipball/3.0.7,3.0.7,False,False
764051,2014-12-07T21:03:38Z,2014-12-08T12:53:58Z,3.0.6,"- Fix missing semicolon when comment comes after last declaration.
- Fix Safe Mode declaration parsing on unclosed blocks.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/764051/assets,https://api.github.com/repos/postcss/postcss/releases/764051,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.6,https://github.com/postcss/postcss/releases/tag/3.0.6,https://api.github.com/repos/postcss/postcss/zipball/3.0.6,3.0.6,False,False
739535,2014-11-27T20:36:49Z,2014-11-27T20:38:10Z,3.0.5,"- Fix parser to support [difficult cases](https://github.com/postcss/postcss/blob/master/test/cases/parse/escape.css) with backslash escape and brackets.
- Add `CssSyntaxError#stack` (by @MoOx).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/739535/assets,https://api.github.com/repos/postcss/postcss/releases/739535,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.5,https://github.com/postcss/postcss/releases/tag/3.0.5,https://api.github.com/repos/postcss/postcss/zipball/3.0.5,3.0.5,False,False
725556,2014-11-22T08:26:48Z,2014-11-22T08:27:13Z,3.0.4,"- Fix Safe Mode on unknown word before declaration.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/725556/assets,https://api.github.com/repos/postcss/postcss/releases/725556,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.4,https://github.com/postcss/postcss/releases/tag/3.0.4,https://api.github.com/repos/postcss/postcss/zipball/3.0.4,3.0.4,False,False
723241,2014-11-21T12:53:20Z,2014-11-21T12:54:24Z,3.0.3,"- Increase tokenizer speed (by @lahmatiy).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/723241/assets,https://api.github.com/repos/postcss/postcss/releases/723241,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.3,https://github.com/postcss/postcss/releases/tag/3.0.3,https://api.github.com/repos/postcss/postcss/zipball/3.0.3,3.0.3,False,False
704583,2014-11-14T13:58:17Z,2014-11-14T14:00:21Z,3.0.2,"- Fix empty comment parsing.
- Fix `Root#normalize` in some inserts.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/704583/assets,https://api.github.com/repos/postcss/postcss/releases/704583,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.2,https://github.com/postcss/postcss/releases/tag/3.0.2,https://api.github.com/repos/postcss/postcss/zipball/3.0.2,3.0.2,False,False
702337,2014-11-13T18:38:13Z,2014-11-13T18:49:58Z,3.0.1,"- Fix Rhino JS runtime support.
- Typo in deprecated warning (by @MoOx).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/702337/assets,https://api.github.com/repos/postcss/postcss/releases/702337,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.1,https://github.com/postcss/postcss/releases/tag/3.0.1,https://api.github.com/repos/postcss/postcss/zipball/3.0.1,3.0.1,False,False
698379,2014-11-11T22:12:36Z,2014-11-12T15:17:09Z,3.0 “Marquis Andrealphus”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574744/aea0a608-8fc8-11e4-8cb6-64a2fedc183e.png"" align=""right"" width=""200"" height=""200"" alt=""Marquis Andrealphus seal"">

PostCSS 3.0 now has the fastest JavaScript-based CSS parser.

### Performance

Unlike most CSS parsers, PostCSS preserves whitespace. So historically PostCSS did not have the best performance of them all. But for PostCSS 3.0 we've decided to focus on the performance issues.
1. @Termina1 added good benchmarks in order to have feedback for performance optimizations.
2. We've moved from ES6 Transpiler to [6to5](https://github.com/6to5/6to5) compiler. Unfortunately, Transpiler had a side effect to Node.js perfomance.
3. Our old parser was already too complicated. So we split it in two steps: tokenizing and parsing. As a result, parser become much simpler — and ready for hardcore optimizations.
4. @Termina1 added quick space check and faster `map`.
5. @brainopia went even further and rewrote tokenizer to use char codes instead of strings. Also he added fast jumps for finding a closed quote or bracket.

As result, the PostCSS parser is now 6 times faster. Current benchmark on `bootstrap.css` (Fedora 20, node 0.10.32, i7-3517U, 8 GB RAM, SSD):

```
PostCSS 3:   23 ms
CSSOM:       28 ms  (1.2 times slower)
Mensch:      47 ms  (2.0 times slower)
Rework:      62 ms  (2.7 times slower)
Stylecow:    122 ms (5.3 times slower)
PostCSS 2:   141 ms (6.1 times slower)
Gonzales PE: 162 ms (7.0 times slower)
Gonzales:    175 ms (7.5 times slower)
```

### Nested Rules

Old PostCSS 2 could not parse `@page` at-rule, because it did contain a mix of at-rules and declarations:

``` css
@page {
    margin-top: 10px;
    @bottom-center { ... /* page number */}
}
```

PostCSS 3.0 can now parse declarations, rules and at-rules inside any parent node. As a result, we can support custom at-rules with any type of content inside (declarations, rules or mix of declarations and rules):

``` css
@sprite-config {
    padding: 5px;
}
```

Another benefit is that you now can write plugins like [postcss-nested](https://github.com/postcss/postcss-nested).

### API Changes
- Child nodes array is now in `Container#childs` property. `decls` and `rules` properties are now deprecated and will be removed in the 3.1 release.
- `map.inline` and `map.sourcesContent` properties are now enabled by default, since it is now the most popular way to use maps.

### Other Changes
- Fix iterators (`each`, `insertAfter`) on child array changes.
- Use previous source map to show origin source of the CSS syntax error.
- Use code style for manually added rules from existing rules.
- Use `from` option from previous source map `file` field.
- Set `to` value to `from` if `to` option is missing.
- Use better node source name if `from` option is missing.
- Show a syntax error when `;` is missing between declarations.
- Allow to pass `PostCSS` instance or list of plugins to `use()` method.
- Allow to pass `Result` instance to `process()` method.
- Do not remove previous `sourceMappingURL` comment on `map.annotation: false`.
- Fix source map generation for nodes without source.
- Fix next child `before` if `Root` first child got removed.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/698379/assets,https://api.github.com/repos/postcss/postcss/releases/698379,master,https://api.github.com/repos/postcss/postcss/tarball/3.0.0,https://github.com/postcss/postcss/releases/tag/3.0.0,https://api.github.com/repos/postcss/postcss/zipball/3.0.0,3.0.0,False,False
669776,2014-10-31T20:53:25Z,2014-10-31T20:54:02Z,2.2.6,"- Fix map generation for nodes without source (by @josiahsavary).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/669776/assets,https://api.github.com/repos/postcss/postcss/releases/669776,master,https://api.github.com/repos/postcss/postcss/tarball/2.2.6,https://github.com/postcss/postcss/releases/tag/2.2.6,https://api.github.com/repos/postcss/postcss/zipball/2.2.6,2.2.6,False,False
580895,2014-09-24T20:53:15Z,2014-09-24T20:55:25Z,2.2.5,"- Fix source map with BOM marker support (by @MohammadYounes).
- Fix source map paths (by @MohammadYounes).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/580895/assets,https://api.github.com/repos/postcss/postcss/releases/580895,master,https://api.github.com/repos/postcss/postcss/tarball/2.2.5,https://github.com/postcss/postcss/releases/tag/2.2.5,https://api.github.com/repos/postcss/postcss/zipball/2.2.5,2.2.5,False,False
528278,2014-09-01T17:53:18Z,2014-09-01T17:55:00Z,2.2.4,"- Fix `prepend()` on empty `Root`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/528278/assets,https://api.github.com/repos/postcss/postcss/releases/528278,master,https://api.github.com/repos/postcss/postcss/tarball/2.2.4,https://github.com/postcss/postcss/releases/tag/2.2.4,https://api.github.com/repos/postcss/postcss/zipball/2.2.4,2.2.4,False,False
519660,2014-08-27T23:15:52Z,2014-08-27T23:22:36Z,2.2.3,"- Allow to use object shortcut in `use()` with functions like `autoprefixer`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/519660/assets,https://api.github.com/repos/postcss/postcss/releases/519660,master,https://api.github.com/repos/postcss/postcss/tarball/2.2.3,https://github.com/postcss/postcss/releases/tag/2.2.3,https://api.github.com/repos/postcss/postcss/zipball/2.2.3,2.2.3,False,False
518525,2014-08-27T15:24:20Z,2014-08-27T15:25:01Z,2.2.2,"- Add shortcut to set processors in `use()` via object with `.postcss` property.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/518525/assets,https://api.github.com/repos/postcss/postcss/releases/518525,master,https://api.github.com/repos/postcss/postcss/tarball/2.2.2,https://github.com/postcss/postcss/releases/tag/2.2.2,https://api.github.com/repos/postcss/postcss/zipball/2.2.2,2.2.2,False,False
508372,2014-08-22T12:29:19Z,2014-08-22T12:33:40Z,2.2.1,"- Processors now receive options from `process(css, opts)` by @MoOx’s [idea](https://github.com/postcss/postcss/issues/83).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/508372/assets,https://api.github.com/repos/postcss/postcss/releases/508372,master,https://api.github.com/repos/postcss/postcss/tarball/2.2.1,https://github.com/postcss/postcss/releases/tag/2.2.1,https://api.github.com/repos/postcss/postcss/zipball/2.2.1,2.2.1,False,False
496538,2014-08-17T14:51:22Z,2014-08-17T15:15:01Z,2.2 “Marquis Cimeies”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574745/c5415632-8fc8-11e4-9b0e-500925032847.png"" align=""right"" width=""200"" height=""200"" alt=""Marquis Cimeies seal"">

This release adds `Node#replace()` shortcut and uses GNU style for syntax error messages.

### Replace Nodes

@jonathanong [suggested](https://github.com/postcss/postcss/issues/72) good shortcut to replace one node to another (or several other nodes). For example, you can write `@import` loader:

``` js
css.eachAtRule(function (rule) {
    if ( rule.name != 'import' ) return;

    var file = readFileFromRule(rule);
    var content = fs.readFileSync(file);
    var root = postcss.parse(content, { from: file });

    rule.replace(root);
});
```

### GNU Style for Syntax Errors

Old PostCSS’s errors was like `Can't parse CSS: Unexpected { in decls at line 2:1 in a.css`.

But [GNU Coding Standards](https://www.gnu.org/prep/standards/html_node/Errors.html) had good recommendations for syntax error messages. Rework, CoffeeScript and other tools already use it. Also some tools can find this format in output and they will open your text editor on this line.

PostCSS 2.2 now uses GNU style for syntax errors:

```
a.css:2:1 Unexpected { in decls
```

Also `CssSyntaxError` now has `reason` property to build your own error messages in end-user interfaces (in previous example it will be `""Unexpected { in decls""`).

### PostCSS Organization

PostCSS repository was moved to [postcss](https://github.com/postcss) GitHub organiztion, which will host official plugins.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/496538/assets,https://api.github.com/repos/postcss/postcss/releases/496538,master,https://api.github.com/repos/postcss/postcss/tarball/2.2.0,https://github.com/postcss/postcss/releases/tag/2.2.0,https://api.github.com/repos/postcss/postcss/zipball/2.2.0,2.2.0,False,False
480249,2014-08-08T19:34:28Z,2014-08-08T19:39:44Z,2.1.2,"@bclinkinbeard found several rare and interesting bugs. This release fix them.
- Fix UTF-8 support in inline source map by using [js-base64](https://www.npmjs.org/package/js-base64) instead of [base64-js](https://www.npmjs.org/package/base64-js).
- Fix source map `sourcesContent` if there is no `from` and `to` options.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/480249/assets,https://api.github.com/repos/postcss/postcss/releases/480249,master,https://api.github.com/repos/postcss/postcss/tarball/2.1.2,https://github.com/postcss/postcss/releases/tag/2.1.2,https://api.github.com/repos/postcss/postcss/zipball/2.1.2,2.1.2,False,False
475540,2014-08-06T21:49:54Z,2014-08-06T21:56:18Z,2.1.1,"- Allow to miss `to` and `from` options for inline source maps.
- Add `Node#source.id` if file name is unknown.
- Better detect splitter between rules in CSS concatenation tools.
- Automatically clone node in insert methods.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/475540/assets,https://api.github.com/repos/postcss/postcss/releases/475540,master,https://api.github.com/repos/postcss/postcss/tarball/2.1.1,https://github.com/postcss/postcss/releases/tag/2.1.1,https://api.github.com/repos/postcss/postcss/zipball/2.1.1,2.1.1,False,False
453387,2014-07-27T09:14:26Z,2014-07-27T09:29:25Z,2.1 “King Amdusias”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574748/d89a4d4c-8fc8-11e4-99c2-a2bca83d57d7.png"" width=""200"" height=""200"" align=""right"" alt=""King Amdusias seal"">

PostCSS 2.1 has new ES6 compiler and show syntax error source.

### ES6 Transpiler

PostCSS 2.0 used [Traceur](https://github.com/google/traceur-compiler) to compile ES6 sources to pure JS. Traceur is very powerful, but require to add special runtime JS file to build. Runtime was very big, had side effects and some problems in Browserify and Rhino.

New PostCSS 2.1 uses [ES6 Transpiler](https://github.com/termi/es6-transpiler). It hasn’t runtime, doesn’t change system classes and very small and easy to use. Also it has line-to-line input/output mapping to make debug easier.

### Source Line in Syntax Error

By @jonathanong [idea](https://github.com/ai/postcss/issues/59) CSS syntax error messages now include broken source line:

```
> postcss.parse('a {\n  b { }\n}')
Can't parse CSS: Unexpected { in decls at line 2:5
a {
  b { }
    ^
}
```

PostCSS will try to detect environment and use colors in error output if they are supported.

<img src=""http://postcss.github.io/postcss/logo.svg"" width=""80"" height=""80"" align=""right"">

### Logo

And now PostCSS has own logo. It is alchemist symbol of [philosopher’s stone](https://en.wikipedia.org/wiki/Philosopher's_stone), which can process lead into gold. 
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/453387/assets,https://api.github.com/repos/postcss/postcss/releases/453387,master,https://api.github.com/repos/postcss/postcss/tarball/2.1.0,https://github.com/postcss/postcss/releases/tag/2.1.0,https://api.github.com/repos/postcss/postcss/zipball/2.1.0,2.1.0,False,False
445566,2014-07-23T06:51:06Z,2014-07-23T07:23:34Z,2.0 “King Belial”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574751/ff3977fc-8fc8-11e4-8806-6095b3da4b28.png"" width=""200"" height=""200"" align=""right"" alt=""King Belial seal"">

PostCSS 2.0 was rewritten from CoffeeScript to ES6, contains Safe Mode and is more friendly to new developers.

### ES6

PostCSS was written on [CoffeeScript](http://coffeescript.org/) to have clean and readable code. But many developers afraid CoffeeScript, because of very different syntax.

I think, that it is very important to be able to read your framework sources. To be more friendly to developers PostCSS was rewritten to ES6.

If you use npm you will not see any changes. PostCSS releases contain only compiled pure JS from [Traceur](https://github.com/google/traceur-compiler). But now you can read PostCSS sources without the knowledge of CoffeeScript syntax.

### Testing

PostCSS should not fall on some legacy CSS with hacks. So we have not only unit tests, but also test all releases with real world CSS from Twitter, GitHub, Bootstrap and Habrahabr.

But this sites have good written code. PostCSS 2 are also tested with [Browserhacks](http://browserhacks.com/) examples and contains few parser fixes to pass all CSS hacks from there.

### Safe Mode

PostCSS 2.0 had special Safe Mode, which try to fix broken CSS. For example, it will parse `a {` as `a {}`. It will be useful for live input tool (like [Autoprefixer interactive demo](http://jsfiddle.net/simevidas/udyTs/show/light/)) or to parse old legacy code.

``` js
postcss.parse('a {');                 // will throw ""Unclosed block""
postcss.parse('a {', { safe: true }); // will return CSS root for a {}
```

### Raw Properties

PostCSS used getter and setter for `selector`, `value`, etc properties. They confused new users, because getters was not showed, when you inspect node in console.

PostCSS 2 is more friendly to new developers and use only regular properties without any magic.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/445566/assets,https://api.github.com/repos/postcss/postcss/releases/445566,master,https://api.github.com/repos/postcss/postcss/tarball/2.0.0,https://github.com/postcss/postcss/releases/tag/2.0.0,https://api.github.com/repos/postcss/postcss/zipball/2.0.0,2.0.0,False,False
389050,2014-06-23T04:53:29Z,2014-06-23T09:25:33Z,1.0 “Marquis Decarabia”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574753/1092042e-8fc9-11e4-9de6-990688f5e0a0.png"" width=""200"" height=""200"" align=""right"" alt=""Marquis Decarabia seal"" />

This release improved source map API and allowed to use PostCSS with multiple inputs, like in file concatenation tools.

### Source Map API Changes

@lydell [suggested](https://github.com/ai/postcss/issues/49) great plan to clean up source map options. Now all map options will be inside `map` object.
- `inlineMap: true` was renamed to `map: { inline: true }`.
- `mapAnnotation: false` was renamed to `map: { annotation: false }`.
- Previous source map should be set to separated option `map: { prev: prevMap }` instead of old `map: prevMap`.

There is `map: 'inline'` shortcut if you want to set only `map: { inline: true }`. Old options are deprecated and will print warnings.

Also there are two API improvements for plugin’s popular needs:
- Map can contain origin CSS source, if you set `map: { sourcesContent: true }` option.
- You can change result map path by `map: { annotation: '../maps/app.css.map' }` option. Note that path in `annotation` must be relative to output CSS file.

### Result API Changes

By @dantman [idea](https://github.com/ai/postcss/pull/53), `process(css, opts)` and `toResult(opts)` methods now return lazy result object, so CSS will not be stringified until you access to `result.css` or `result.map` properties:

``` js
var result1 = processor.process(css1);
var result2 = processor.process(css2);
// We need to concat this files, so we doesn’t need to stringify content yet

result1.root.append( result2.root );
result1.css // Now output CSS will be stringified
result1.map // Source map will be generated only now
            // and will include map from result2
```

Also `Result#map` will return `SourceMapGenerator` object (from Mozilla’s [source-map](https://github.com/mozilla/source-map)) instead of string. It will allow to change something in generated map:

``` js
var result = processor.process(css, { map: true });
result.map.applySourceMap(otherMap, 'undetected.css');

console.log('map: ' + result.map) // SourceMapGenerator has toString() method,
                                  // so old code should work
result.map.toJSON().file // But also you can access to generated map properties
```

### Styles Concatenation

PostCSS now tracks previous source map in every node. So, when you move any node from one root to another, it will take previous map:

``` js
root1 = postcss.parse(css1, { map: { prev: prev1 } });
root2 = postcss.parse(css2, { map: { prev: prev2 } });

root1.append( root2.rules[0] );

root.toResult().map // will include prev1 and prev2 maps
```

Also all methods to add node (`append`, `prepend`, `insertBefore`, `insertAfter`) now accept arrays and `Root` node:

``` js
root1.append( root2 );
root1.append( root3.rules[1].rules );
```

### Other Changes
- PostCSS is written on CoffeeScript, so you wasn’t be able to use latest unreleased versions from GitHub. Now code contains special hack and you can use latest PostCSS by<br>`""postcss"": ""ai/postcss""` in your npm’s `package.json`.
- `Root` node now has `prevMap` property with information about previous map. Mostly for internal usage, but maybe you will need it.
- PostCSS will try to autodetect previous source map file only if input CSS contains annotation comment with map path.
- `Node#source.file` now contains absolute path. It is also part of work to support style concatenation, when you can generate different roots from different paths.
- `Declaration#clone()` will clean `between` style too to use style from new place.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/389050/assets,https://api.github.com/repos/postcss/postcss/releases/389050,master,https://api.github.com/repos/postcss/postcss/tarball/1.0.0,https://github.com/postcss/postcss/releases/tag/1.0.0,https://api.github.com/repos/postcss/postcss/zipball/1.0.0,1.0.0,False,False
347590,2014-05-30T05:56:04Z,2014-05-30T05:57:18Z,0.3.5,"- Allow to use `Root` or `Result` as first argument in `process()`.
- Save parsed AST to `Result#root`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/347590/assets,https://api.github.com/repos/postcss/postcss/releases/347590,master,https://api.github.com/repos/postcss/postcss/tarball/0.3.5,https://github.com/postcss/postcss/releases/tag/0.3.5,https://api.github.com/repos/postcss/postcss/zipball/0.3.5,0.3.5,False,False
207946,2014-03-03T20:23:16Z,2014-03-03T20:23:49Z,0.3.4,"- Better space symbol detect to read UTF-8 BOM correctly.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/207946/assets,https://api.github.com/repos/postcss/postcss/releases/207946,master,https://api.github.com/repos/postcss/postcss/tarball/0.3.4,https://github.com/postcss/postcss/releases/tag/0.3.4,https://api.github.com/repos/postcss/postcss/zipball/0.3.4,0.3.4,False,False
206130,2014-03-02T09:14:22Z,2014-03-02T09:15:43Z,0.3.3,"- Remove source map hacks by using new Mozilla’s `source-map` (by @lydell).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/206130/assets,https://api.github.com/repos/postcss/postcss/releases/206130,master,https://api.github.com/repos/postcss/postcss/tarball/0.3.3,https://github.com/postcss/postcss/releases/tag/0.3.3,https://api.github.com/repos/postcss/postcss/zipball/0.3.3,0.3.3,False,False
191700,2014-02-19T11:04:20Z,2014-02-19T11:08:10Z,,"- Add URI encoding support for inline source maps.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/191700/assets,https://api.github.com/repos/postcss/postcss/releases/191700,master,https://api.github.com/repos/postcss/postcss/tarball/0.3.2,https://github.com/postcss/postcss/releases/tag/0.3.2,https://api.github.com/repos/postcss/postcss/zipball/0.3.2,0.3.2,False,False
190207,2014-02-18T12:24:30Z,2014-02-18T12:26:45Z,0.3.1,"- Fix relative paths from previous source map.
- Safer space split in `Rule#selectors` (by @lydell).
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/190207/assets,https://api.github.com/repos/postcss/postcss/releases/190207,master,https://api.github.com/repos/postcss/postcss/tarball/0.3.1,https://github.com/postcss/postcss/releases/tag/0.3.1,https://api.github.com/repos/postcss/postcss/zipball/0.3.1,0.3.1,False,False
185047,2014-02-13T19:28:30Z,2014-02-13T20:38:20Z,0.3 “Prince Seere”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574771/927f0b6c-8fc9-11e4-9de7-b2a8f3b69ebf.png"" width=""200"" height=""200"" align=""right"" alt=""Prince Seere seal"" />

This release improve source map support, copy your code style in new nodes and add few API.

### Source Map

If you generate map for your changes, output CSS will contains source map annotation comment:

``` css
a { }
/*# sourceMappingURL=to.css.map */
```

Now you can inline source map to annotation comment by `data:uri`. Use `inlineMap` option:

``` js
var result = porcessor.process(css, { inlineMap: true });
result.map //=> undefined, because map is in CSS
result.css //=> ""a{}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5taW4uY3NzIiwic291cmNlcyI6WyJtYWluLmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFLIn0= */""
```

PostCSS will autodetect previous source map if map is in annotation comment or in file near input CSS. You can disable autodetection by `map: false` option.

Source map now has special fixes to works on Windows and in subdirectories. Thanks to @nDmitry and @lydell, they did great investigation.

### Code Style

New rule will copy style from parsed rules:

``` js
var root = postcss,parse("".empty {};\na {\n  color: black;\n  }"");
var rule = postcss.rule({ selector: 'b' });
root.append(rule);

rule.toString(); //=> ""b {}""
                 // copy style from empty rule

rule.append({ prop: 'top', value: '1px' });
rule.toString(); //=> ""b {\n  top: 1px;\n  }""
                 // copy style from rule with declaration
```

Selector and at-rule params was cleaned from spaces and comments before `{`. `AtRule` and `Rule` nodes now has `between` property. `Declaration` also has `between` property with colon, spaces and comments between property name and value.

### API Changes
- Comments between rules and declarations now parsed to `Comment` node.
- Container node now has `first` and `last` shortcut with first or last child.
- Declaration value will not contains `!important` rule anymore. It will be parsed to separated `important` property.
- You can now break any nodes iteration with return `false`.
- New method `eachInside()` allow you to recursive iterate node of all types.
- Rule now contains `selectors` shorcut property, which returns selectors in array.
- In 0.3 process multiple input files will be easy by `toResult()` method in `Root`.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/185047/assets,https://api.github.com/repos/postcss/postcss/releases/185047,master,https://api.github.com/repos/postcss/postcss/tarball/0.3,https://github.com/postcss/postcss/releases/tag/0.3,https://api.github.com/repos/postcss/postcss/zipball/0.3,0.3,False,False
125180,2013-12-17T23:46:13Z,2013-12-17T23:50:08Z,0.2 “Duke Dantalion”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574785/ea04e816-8fc9-11e4-8942-95058b9bde99.png"" width=""200"" height=""200"" align=""right"" alt=""Duke Dantalion seal"" />
- Add source map support.
- Add shortcuts to create nodes.
- Method `process()` now returns object with `css` and `map` keys.
- Origin CSS file option was renamed from `file` to `from`.
- Rename `Node#remove()` method to `removeSelf()` to fix name conflict.
- Node source was moved to `source` property with origin file
  and node end position.
- You can set own stringify function.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/125180/assets,https://api.github.com/repos/postcss/postcss/releases/125180,master,https://api.github.com/repos/postcss/postcss/tarball/0.2,https://github.com/postcss/postcss/releases/tag/0.2,https://api.github.com/repos/postcss/postcss/zipball/0.2,0.2,False,False
125172,2013-11-04T20:08:13Z,2013-12-17T23:42:07Z,0.1 “Count Andromalius”,"<img src=""https://cloud.githubusercontent.com/assets/19343/5574790/f32a12ae-8fc9-11e4-95f2-cca176aa492a.png"" width=""200"" height=""200"" align=""right"" alt=""Count Andromalius seal"" />
- Initial release.
",https://api.github.com/users/ai,19343,ai,https://api.github.com/repos/postcss/postcss/releases/125172/assets,https://api.github.com/repos/postcss/postcss/releases/125172,master,https://api.github.com/repos/postcss/postcss/tarball/0.1,https://github.com/postcss/postcss/releases/tag/0.1,https://api.github.com/repos/postcss/postcss/zipball/0.1,0.1,False,False
